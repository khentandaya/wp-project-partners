<?php

/**

 * Timesheet approving form

 *

 * @link https://codex.wordpress.org/Template_Hierarchy

 *

 */
$is_approved = $args['is_approved'];
$ratings = $args['ratings'];
if (!$is_approved) { ?>

    <form class="timesheet-approval mt-2" id="timesheet-approval" method="POST">
        <h3 class="h5 mb-half mt-0">Rating</h3>
        <div class="star-rating" id="star-rating">
            <input type="radio" value="5" name="rating" id="rating-5" required>
            <label for="rating-5"><svg width="28" height="27" viewBox="0 0 28 27" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.4294 0.756228C13.609 0.203442 14.391 0.203444 14.5706 0.75623L17.4575 9.64114C17.5378 9.88835 17.7682 10.0557 18.0282 10.0557H27.3703C27.9515 10.0557 28.1932 10.7995 27.723 11.1411L20.165 16.6323C19.9547 16.7851 19.8667 17.0559 19.947 17.3031L22.8339 26.188C23.0135 26.7408 22.3809 27.2005 21.9106 26.8589L14.3527 21.3677C14.1424 21.2149 13.8576 21.2149 13.6473 21.3677L6.08937 26.8589C5.61914 27.2005 4.98646 26.7408 5.16607 26.188L8.05295 17.3031C8.13328 17.0559 8.04528 16.7851 7.83499 16.6323L0.277032 11.1411C-0.193196 10.7995 0.0484717 10.0557 0.629706 10.0557H9.97185C10.2318 10.0557 10.4622 9.88835 10.5425 9.64114L13.4294 0.756228Z"/>
            </svg></label>
            <input type="radio" value="4" name="rating" id="rating-4">
            <label for="rating-4"><svg width="28" height="27" viewBox="0 0 28 27" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.4294 0.756228C13.609 0.203442 14.391 0.203444 14.5706 0.75623L17.4575 9.64114C17.5378 9.88835 17.7682 10.0557 18.0282 10.0557H27.3703C27.9515 10.0557 28.1932 10.7995 27.723 11.1411L20.165 16.6323C19.9547 16.7851 19.8667 17.0559 19.947 17.3031L22.8339 26.188C23.0135 26.7408 22.3809 27.2005 21.9106 26.8589L14.3527 21.3677C14.1424 21.2149 13.8576 21.2149 13.6473 21.3677L6.08937 26.8589C5.61914 27.2005 4.98646 26.7408 5.16607 26.188L8.05295 17.3031C8.13328 17.0559 8.04528 16.7851 7.83499 16.6323L0.277032 11.1411C-0.193196 10.7995 0.0484717 10.0557 0.629706 10.0557H9.97185C10.2318 10.0557 10.4622 9.88835 10.5425 9.64114L13.4294 0.756228Z"/>
            </svg></label>
            <input type="radio" value="3" name="rating" id="rating-3">
            <label for="rating-3"><svg width="28" height="27" viewBox="0 0 28 27" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.4294 0.756228C13.609 0.203442 14.391 0.203444 14.5706 0.75623L17.4575 9.64114C17.5378 9.88835 17.7682 10.0557 18.0282 10.0557H27.3703C27.9515 10.0557 28.1932 10.7995 27.723 11.1411L20.165 16.6323C19.9547 16.7851 19.8667 17.0559 19.947 17.3031L22.8339 26.188C23.0135 26.7408 22.3809 27.2005 21.9106 26.8589L14.3527 21.3677C14.1424 21.2149 13.8576 21.2149 13.6473 21.3677L6.08937 26.8589C5.61914 27.2005 4.98646 26.7408 5.16607 26.188L8.05295 17.3031C8.13328 17.0559 8.04528 16.7851 7.83499 16.6323L0.277032 11.1411C-0.193196 10.7995 0.0484717 10.0557 0.629706 10.0557H9.97185C10.2318 10.0557 10.4622 9.88835 10.5425 9.64114L13.4294 0.756228Z"/>
            </svg></label>
            <input type="radio" value="2" name="rating" id="rating-2">
            <label for="rating-2"><svg width="28" height="27" viewBox="0 0 28 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13.4294 0.756228C13.609 0.203442 14.391 0.203444 14.5706 0.75623L17.4575 9.64114C17.5378 9.88835 17.7682 10.0557 18.0282 10.0557H27.3703C27.9515 10.0557 28.1932 10.7995 27.723 11.1411L20.165 16.6323C19.9547 16.7851 19.8667 17.0559 19.947 17.3031L22.8339 26.188C23.0135 26.7408 22.3809 27.2005 21.9106 26.8589L14.3527 21.3677C14.1424 21.2149 13.8576 21.2149 13.6473 21.3677L6.08937 26.8589C5.61914 27.2005 4.98646 26.7408 5.16607 26.188L8.05295 17.3031C8.13328 17.0559 8.04528 16.7851 7.83499 16.6323L0.277032 11.1411C-0.193196 10.7995 0.0484717 10.0557 0.629706 10.0557H9.97185C10.2318 10.0557 10.4622 9.88835 10.5425 9.64114L13.4294 0.756228Z"/>
                </svg></label>
            <input type="radio" value="1" name="rating" id="rating-1">
                <label for="rating-1"><svg width="28" height="27" viewBox="0 0 28 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13.4294 0.756228C13.609 0.203442 14.391 0.203444 14.5706 0.75623L17.4575 9.64114C17.5378 9.88835 17.7682 10.0557 18.0282 10.0557H27.3703C27.9515 10.0557 28.1932 10.7995 27.723 11.1411L20.165 16.6323C19.9547 16.7851 19.8667 17.0559 19.947 17.3031L22.8339 26.188C23.0135 26.7408 22.3809 27.2005 21.9106 26.8589L14.3527 21.3677C14.1424 21.2149 13.8576 21.2149 13.6473 21.3677L6.08937 26.8589C5.61914 27.2005 4.98646 26.7408 5.16607 26.188L8.05295 17.3031C8.13328 17.0559 8.04528 16.7851 7.83499 16.6323L0.277032 11.1411C-0.193196 10.7995 0.0484717 10.0557 0.629706 10.0557H9.97185C10.2318 10.0557 10.4622 9.88835 10.5425 9.64114L13.4294 0.756228Z"/>
                </svg></label>
        </div>
        <div class="comment-input mt-1">
            <h3 class="h5 mb-half mt-0">Comments</h3>
            <textarea name="comments" id="comments" spellcheck="true" rows="3"></textarea>
        </div>
        <input type="hidden" name="ratings" id="ratings" value="<?php foreach($ratings as $rating){ echo $rating->item_id . ','; } ?>">
        <?php 
        // set up nonce
        wp_nonce_field('approve_timesheet', 'approve-nonce'); ?>

        <button type="submit" class="button btn full-width" id="timesheet-approve-btn" aria-label="Approve Timesheet">
            <svg class="spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span class="button-text">Approve Timesheet</span></button>
    </form>
<?php
}